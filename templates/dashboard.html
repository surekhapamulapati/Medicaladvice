{% extends "base.html" %}

{% block title %}User Dashboard | MedVice{% endblock %}

{% block content %}

<style>
.dashboard-container {
    max-width: 1000px;
    margin: auto;
    padding: 40px 20px;
}

.dashboard-container h2 {
    color: #1d3557;
    margin-bottom: 30px;
    text-align: center;
}

.record-card {
    background: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: var(--shadow);
}

.record-card h3 {
    margin-top: 0;
    color: #1d3557;
    font-size: 1.4rem;
}

.record-card small {
    color: #888;
    display: block;
    margin-bottom: 15px;
}

.record-card ul {
    margin: 10px 0;
    padding-left: 20px;
}

.btn-group {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 30px;
    flex-wrap: wrap;
}

.btn-group .btn {
    background-color: #1d3557;
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    text-decoration: none;

    transition: background-color 0.3s ease;
    box-shadow: var(--shadow);
}

.btn-group .btn:hover {
    background-color: #1d3557;
}
.diagnosis-number {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: #1d3557;
    color: white;
    font-weight: bold;
    margin-right: 10px;
    font-size: 0.95rem;
}


@media (max-width: 768px) {
    .dashboard-container {
        padding: 20px 10px;
    }
}
</style>

<section class="hero">
    <div class="container hero-content">
        <h2>Your Diagnosis History</h2>
        <p>Review past diagnoses and recommendations.</p>
    </div>
</section>

<section class="dashboard-container">

    {% if results %}

        {% for result in results %}
        <div class="record-card">

      <h3>
    <span class="diagnosis-number">{{ loop.index }}</span>
    {{ result.prediction }}
</h3>




            <small>
                Diagnosed on {{ result.formatted_time }}
            </small>

            <div>
                <strong>Description:</strong>
                <p>{{ result.description }}</p>
            </div>

            <div>
                <strong>Medications:</strong>
                <ul>
                    {% for med in result.medications %}
                        <li>{{ med }}</li>
                    {% endfor %}
                </ul>
            </div>

            <div>
                <strong>Precautions:</strong>
                <ul>
                    {% for pre in result.precautions %}
                        <li>{{ pre }}</li>
                    {% endfor %}
                </ul>
            </div>

            <div>
                <strong>Diet:</strong>
                <ul>
                    {% for diet in result.diets %}
                        <li>{{ diet }}</li>
                    {% endfor %}
                </ul>
            </div>

            <div>
                <strong>Workout:</strong>
                <ul>
                    {% for work in result.workouts %}
                        <li>{{ work }}</li>
                    {% endfor %}
                </ul>
            </div>

        </div>
        {% endfor %}

        <div class="btn-group">
            <a href="{{ url_for('symptoms') }}" class="btn">Check Other Symptoms</a>
            <a href="{{ url_for('map') }}" class="btn">Find Nearby Hospitals</a>
        </div>

    {% else %}
        <p style="text-align: center; color: #888;">
            You have not saved any diagnosis yet.
        </p>
    {% endif %}

</section>

{% endblock %}
